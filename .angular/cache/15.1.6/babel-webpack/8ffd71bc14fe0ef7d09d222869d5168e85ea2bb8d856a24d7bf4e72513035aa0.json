{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { BaseOption } from 'src/app/model/BaseOption';\nimport { Car } from 'src/app/model/Car';\nimport { CarTypeEnum } from 'src/app/model/CarTypeEnum';\nimport { FuelTypeEnum } from 'src/app/model/FuelTypeEnum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/http-service/car-http.service\";\nimport * as i3 from \"src/app/http-service/car-dealer-http.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nfunction CarEditorComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const dealerName_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", dealerName_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(dealerName_r4);\n  }\n}\nfunction CarEditorComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const carType_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", carType_r5.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(carType_r5.text);\n  }\n}\nfunction CarEditorComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r6);\n  }\n}\nfunction CarEditorComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r3.photoPreviewUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nexport let CarEditorComponent = /*#__PURE__*/(() => {\n  class CarEditorComponent {\n    constructor(formBuilder, carHttpService, carDealerHttpService, dialogRef, data) {\n      this.formBuilder = formBuilder;\n      this.carHttpService = carHttpService;\n      this.carDealerHttpService = carDealerHttpService;\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.car = new Car();\n      this.saveCar = new EventEmitter();\n      // carTypes = Object.values(CarTypeEnum).filter(carType => isNaN(Number(carType)));\n      this.carTypesBaseOptions = this.toBaseList(\"CarTypeEnum\", CarTypeEnum);\n      this.fuelTypes = Object.values(FuelTypeEnum).filter(fuelType => isNaN(Number(fuelType)));\n      this.carDealersNames = [];\n      this.selectedPhoto = null;\n      this.photoPreviewUrl = \"\";\n      this.carForm = this.formBuilder.group({\n        name: ['', Validators.required],\n        price: [0, Validators.required],\n        numberOfPassengers: [0, Validators.required],\n        numberOfBags: [0, Validators.required],\n        minimumAgeWithoutFee: [0, Validators.required],\n        automaker: ['', Validators.required],\n        photoPath: [''],\n        automatic: [false],\n        discountApplicable: [false],\n        carDealer: ['', Validators.required],\n        carType: [CarTypeEnum.SEDAN, Validators.required],\n        fuelType: [FuelTypeEnum.GASOLINE, Validators.required] // Set default enum value\n      });\n    }\n\n    ngOnInit() {\n      if (this.data.car.name) {\n        this.loadCar(this.data.car);\n      } else {\n        this.carDealerHttpService.getCarDealersNames().subscribe({\n          next: carDealersNames => {\n            this.carDealersNames = carDealersNames;\n            console.log(\"Success\");\n          },\n          error: () => console.log(\"Error\")\n        });\n      }\n    }\n    loadCar(car) {\n      this.carForm.controls['name'].setValue(car.name);\n      this.carForm.controls['automaker'].setValue(car.automaker);\n      this.carForm.controls['price'].setValue(car.price);\n      this.carForm.controls['numberOfPassengers'].setValue(car.numberOfPassengers);\n      this.carForm.controls['numberOfBags'].setValue(car.numberOfBags);\n      this.carForm.controls['minimumAgeWithoutFee'].setValue(car.minimumAgeWithoutFee);\n      this.photoPreviewUrl = car.photoPath;\n      this.carForm.controls['automatic'].setValue(car.automatic);\n    }\n    onSaveCar() {\n      console.log(\"save\");\n      // if (this.carForm.valid) {\n      this.car.name = this.carForm.controls['name'].value;\n      this.car.automaker = this.carForm.controls['automaker'].value;\n      this.car.price = this.carForm.controls['price'].value;\n      this.car.numberOfPassengers = this.carForm.controls['numberOfPassengers'].value;\n      this.car.numberOfBags = this.carForm.controls['numberOfBags'].value;\n      this.car.minimumAgeWithoutFee = this.carForm.controls['minimumAgeWithoutFee'].value;\n      this.car.photoPath = this.photoPreviewUrl;\n      this.car.automatic = this.carForm.controls['automatic'].value;\n      // this.car.carDealer = this.carForm.controls['carDealer'].value;\n      // this.car.carType = this.carForm.controls['carType'].value;\n      // this.car.fuelType = this.carForm.controls['fuelType'].value;\n      console.log(this.car);\n      console.log(\"save call\");\n      this.carHttpService.save(this.car).subscribe({\n        next: car => {\n          this.dialogRef.close(car);\n          console.log(\"Success\");\n        },\n        error: () => console.log(\"Error\")\n      });\n      // }\n    }\n\n    onPhotoSelected(event) {\n      const inputElement = event.target;\n      if (inputElement.files && inputElement.files.length > 0) {\n        this.selectedPhoto = inputElement.files[0];\n        // Read the selected file and display the preview\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.photoPreviewUrl = reader.result;\n        };\n        reader.readAsDataURL(this.selectedPhoto);\n      }\n    }\n    toBaseList(enumerationName, enumeration) {\n      let baseOptions = [];\n      Object.keys(enumeration).filter(key => !Number(key) && key !== \"0\").forEach(key => __awaiter(this, void 0, void 0, function* () {\n        let translatedValue = enumeration;\n        baseOptions.push(new BaseOption(key, translatedValue));\n      }));\n      return baseOptions;\n    }\n  }\n  CarEditorComponent.ɵfac = function CarEditorComponent_Factory(t) {\n    return new (t || CarEditorComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CarHttpService), i0.ɵɵdirectiveInject(i3.CarDealerHttpService), i0.ɵɵdirectiveInject(i4.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  CarEditorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CarEditorComponent,\n    selectors: [[\"app-car-editor\"]],\n    inputs: {\n      car: \"car\"\n    },\n    outputs: {\n      saveCar: \"saveCar\"\n    },\n    decls: 28,\n    vars: 7,\n    consts: [[3, \"formGroup\"], [\"for\", \"carName\"], [\"id\", \"carName\", \"type\", \"text\", \"formControlName\", \"name\"], [\"for\", \"carDealer\"], [\"id\", \"carDealer\", \"formControlName\", \"carDealer\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"carType\"], [\"for\", \"fuelType\"], [\"id\", \"fuelType\", \"formControlName\", \"fuelType\"], [\"disabled\", \"\", 3, \"ngValue\"], [1, \"photo-container\"], [\"for\", \"photoInput\", 1, \"photo-label\"], [\"type\", \"file\", \"id\", \"photoInput\", \"accept\", \"image/*\", 3, \"change\"], [1, \"photo-filename\"], [4, \"ngIf\"], [3, \"click\"], [3, \"value\"], [\"alt\", \"Photo Preview\", 1, \"photo-preview\", 3, \"src\"]],\n    template: function CarEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\")(2, \"label\", 1);\n        i0.ɵɵtext(3, \"Car Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"input\", 2);\n        i0.ɵɵelementStart(5, \"label\", 3);\n        i0.ɵɵtext(6, \"Car Dealer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"select\", 4);\n        i0.ɵɵtemplate(8, CarEditorComponent_option_8_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"label\", 6);\n        i0.ɵɵtext(10, \"Car Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"select\");\n        i0.ɵɵtemplate(12, CarEditorComponent_option_12_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"label\", 7);\n        i0.ɵɵtext(14, \"Fuel Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"select\", 8)(16, \"option\", 9);\n        i0.ɵɵtext(17, \"Select Fuel Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, CarEditorComponent_option_18_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 10)(20, \"label\", 11);\n        i0.ɵɵtext(21, \"Attach Photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 12);\n        i0.ɵɵlistener(\"change\", function CarEditorComponent_Template_input_change_22_listener($event) {\n          return ctx.onPhotoSelected($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"span\", 13);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(25, CarEditorComponent_div_25_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function CarEditorComponent_Template_button_click_26_listener() {\n          return ctx.onSaveCar();\n        });\n        i0.ɵɵtext(27, \"Save\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.carForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.carDealersNames);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.carTypesBaseOptions);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngValue\", null);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fuelTypes);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.selectedPhoto == null ? null : ctx.selectedPhoto.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.photoPreviewUrl);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\"form[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    max-width: 400px;\\n    margin: 0 auto;\\n    padding: 20px;\\n    border: 1px solid #ddd;\\n    border-radius: 5px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  \\n  label[_ngcontent-%COMP%] {\\n    margin-top: 10px;\\n    font-weight: bold;\\n  }\\n  \\n  input[_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n    padding: 8px;\\n    border: 1px solid #ccc;\\n    border-radius: 5px;\\n    width: 100%;\\n  }\\n  \\n  \\n  #photoInput[_ngcontent-%COMP%] {\\n    display: none; \\n  }\\n  \\n  .photo-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .photo-label[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n    padding: 8px 12px;\\n    background-color: #4caf50;\\n    color: white;\\n    border-radius: 5px;\\n  }\\n  \\n  .photo-filename[_ngcontent-%COMP%] {\\n    margin-left: 10px;\\n  }\\n  \\n  \\n  button[_ngcontent-%COMP%] {\\n    padding: 10px 20px;\\n    background-color: #4caf50;\\n    color: white;\\n    border: none;\\n    border-radius: 5px;\\n    cursor: pointer;\\n  }\\n  \\n  button[_ngcontent-%COMP%]:hover {\\n    background-color: #45a049;\\n  }\\n  \\n  \\n  div[_ngcontent-%COMP%]:not(:last-child) {\\n    margin-bottom: 20px;\\n  }\\n\\n  \\n\\n\\n#photoInput[_ngcontent-%COMP%] {\\n    display: none; \\n  }\\n  \\n  .photo-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .photo-label[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n    padding: 8px 12px;\\n    background-color: #4caf50;\\n    color: white;\\n    border-radius: 5px;\\n  }\\n  \\n  .photo-filename[_ngcontent-%COMP%] {\\n    margin-left: 10px;\\n  }\\n  \\n  \\n  .photo-preview[_ngcontent-%COMP%] {\\n    max-width: 100%;\\n    margin-top: 10px;\\n    border: 1px solid #ccc;\\n    border-radius: 5px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FyL2Nhci1lZGl0b3IvY2FyLWVkaXRvci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2Qjs7QUFFN0IsNkJBQTZCO0FBQzdCO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLHdDQUF3QztFQUMxQzs7RUFFQSxpQ0FBaUM7RUFDakM7SUFDRSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0VBQ25COztFQUVBOztJQUVFLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixXQUFXO0VBQ2I7O0VBRUEsa0NBQWtDO0VBQ2xDO0lBQ0UsYUFBYSxFQUFFLDhCQUE4QjtFQUMvQzs7RUFFQTtJQUNFLGFBQWE7SUFDYixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsaUJBQWlCO0lBQ2pCLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBLDRCQUE0QjtFQUM1QjtJQUNFLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekIsWUFBWTtJQUNaLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQjs7RUFFQSxzQ0FBc0M7RUFDdEM7SUFDRSxtQkFBbUI7RUFDckI7O0VBRUEsNkJBQTZCOztBQUUvQixrQ0FBa0M7QUFDbEM7SUFDSSxhQUFhLEVBQUUsOEJBQThCO0VBQy9DOztFQUVBO0lBQ0UsYUFBYTtJQUNiLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGVBQWU7SUFDZixpQkFBaUI7SUFDakIseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUEsNEJBQTRCO0VBQzVCO0lBQ0UsZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLHdDQUF3QztFQUMxQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGNhci1lZGl0b3IuY29tcG9uZW50LmNzcyAqL1xuXG4vKiBTdHlsZSB0aGUgZm9ybSBjb250YWluZXIgKi9cbmZvcm0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgfVxuICBcbiAgLyogU3R5bGUgZm9ybSBmaWVsZHMgYW5kIGxhYmVscyAqL1xuICBsYWJlbCB7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgfVxuICBcbiAgaW5wdXQsXG4gIHNlbGVjdCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgXG4gIC8qIFN0eWxlIHRoZSBwaG90byBpbnB1dCBzZWN0aW9uICovXG4gICNwaG90b0lucHV0IHtcbiAgICBkaXNwbGF5OiBub25lOyAvKiBIaWRlIHRoZSBpbnB1dCBieSBkZWZhdWx0ICovXG4gIH1cbiAgXG4gIC5waG90by1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuICBcbiAgLnBob3RvLWxhYmVsIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICB9XG4gIFxuICAucGhvdG8tZmlsZW5hbWUge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICB9XG4gIFxuICAvKiBTdHlsZSB0aGUgc3VibWl0IGJ1dHRvbiAqL1xuICBidXR0b24ge1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGNhZjUwO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICBcbiAgYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDVhMDQ5O1xuICB9XG4gIFxuICAvKiBBZGQgc3BhY2luZyBiZXR3ZWVuIGZvcm0gc2VjdGlvbnMgKi9cbiAgZGl2Om5vdCg6bGFzdC1jaGlsZCkge1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIH1cblxuICAvKiBjYXItZWRpdG9yLmNvbXBvbmVudC5jc3MgKi9cblxuLyogU3R5bGUgdGhlIHBob3RvIGlucHV0IHNlY3Rpb24gKi9cbiNwaG90b0lucHV0IHtcbiAgICBkaXNwbGF5OiBub25lOyAvKiBIaWRlIHRoZSBpbnB1dCBieSBkZWZhdWx0ICovXG4gIH1cbiAgXG4gIC5waG90by1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuICBcbiAgLnBob3RvLWxhYmVsIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICB9XG4gIFxuICAucGhvdG8tZmlsZW5hbWUge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICB9XG4gIFxuICAvKiBTdHlsZSB0aGUgcGhvdG8gcHJldmlldyAqL1xuICAucGhvdG8tcHJldmlldyB7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgfVxuICBcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return CarEditorComponent;\n})();","map":{"version":3,"mappings":"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","names":["EventEmitter","Validators","MAT_DIALOG_DATA","BaseOption","Car","CarTypeEnum","FuelTypeEnum","i0","CarEditorComponent","constructor","formBuilder","carHttpService","carDealerHttpService","dialogRef","data","toBaseList","Object","values","filter","fuelType","isNaN","Number","carForm","group","name","required","price","numberOfPassengers","numberOfBags","minimumAgeWithoutFee","automaker","photoPath","automatic","discountApplicable","carDealer","carType","SEDAN","GASOLINE","ngOnInit","car","loadCar","getCarDealersNames","subscribe","next","carDealersNames","console","log","error","controls","setValue","photoPreviewUrl","onSaveCar","value","save","close","onPhotoSelected","event","inputElement","target","files","length","selectedPhoto","reader","FileReader","onload","result","readAsDataURL","enumerationName","enumeration","baseOptions","keys","key","forEach","__awaiter","translatedValue","push","selectors","inputs","outputs","saveCar","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/balosumihai/Master II/RentACar/RentACar-FrontEnd/src/app/car/car-editor/car-editor.component.ts","/Users/balosumihai/Master II/RentACar/RentACar-FrontEnd/src/app/car/car-editor/car-editor.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { CarDealerHttpService } from 'src/app/http-service/car-dealer-http.service';\nimport { CarHttpService } from 'src/app/http-service/car-http.service';\nimport { BaseOption } from 'src/app/model/BaseOption';\nimport { Car } from 'src/app/model/Car';\nimport { CarTypeEnum } from 'src/app/model/CarTypeEnum';\nimport { FuelTypeEnum } from 'src/app/model/FuelTypeEnum';\n\n@Component({\n  selector: 'app-car-editor',\n  templateUrl: './car-editor.component.html',\n  styleUrls: ['./car-editor.component.css'],\n})\nexport class CarEditorComponent {\n  @Input() car: Car = new Car();\n  @Output() saveCar = new EventEmitter<Car>();\n\n  // carTypes = Object.values(CarTypeEnum).filter(carType => isNaN(Number(carType)));\n\n  carTypesBaseOptions = this.toBaseList(\"CarTypeEnum\", CarTypeEnum)\n  fuelTypes = Object.values(FuelTypeEnum).filter(fuelType => isNaN(Number(fuelType)));\n  carDealersNames: String[] = [];\n\n  carForm: FormGroup;\n  selectedPhoto: File | null = null;\n  photoPreviewUrl: String = \"\";\n  \n  constructor(private formBuilder: FormBuilder,\n    private readonly carHttpService: CarHttpService,\n    private readonly carDealerHttpService: CarDealerHttpService,\n    public dialogRef: MatDialogRef<CarEditorComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any\n    ) {\n    this.carForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      price: [0, Validators.required],\n      numberOfPassengers: [0, Validators.required],\n      numberOfBags: [0, Validators.required],\n      minimumAgeWithoutFee: [0, Validators.required],\n      automaker: ['', Validators.required],\n      photoPath: [''],\n      automatic: [false],\n      discountApplicable: [false],\n      carDealer: ['', Validators.required],\n      carType: [CarTypeEnum.SEDAN, Validators.required], // Set default enum value\n      fuelType: [FuelTypeEnum.GASOLINE, Validators.required], // Set default enum value\n    });\n  }\n\n  ngOnInit(): void {\n    if(this.data.car.name){\n      this.loadCar(this.data.car);\n    } else{\n      this.carDealerHttpService.getCarDealersNames().subscribe({\n        next: carDealersNames => {\n          this.carDealersNames = carDealersNames;\n          console.log(\"Success\");\n        },\n        error: () => console.log(\"Error\")\n      });\n    }    \n  }\n\n  loadCar(car: Car): void {\n    this.carForm.controls['name'].setValue(car.name);\n    this.carForm.controls['automaker'].setValue(car.automaker);\n    this.carForm.controls['price'].setValue(car.price);\n    this.carForm.controls['numberOfPassengers'].setValue(car.numberOfPassengers);\n    this.carForm.controls['numberOfBags'].setValue(car.numberOfBags);\n    this.carForm.controls['minimumAgeWithoutFee'].setValue(car.minimumAgeWithoutFee);\n    this.photoPreviewUrl = car.photoPath;\n    this.carForm.controls['automatic'].setValue(car.automatic);\n\n    }\n\n  onSaveCar(): void {\n    console.log(\"save\")\n    // if (this.carForm.valid) {\n      this.car.name = this.carForm.controls['name'].value;\n      this.car.automaker = this.carForm.controls['automaker'].value;\n      this.car.price = this.carForm.controls['price'].value;\n      this.car.numberOfPassengers = this.carForm.controls['numberOfPassengers'].value;\n      this.car.numberOfBags = this.carForm.controls['numberOfBags'].value;\n      this.car.minimumAgeWithoutFee = this.carForm.controls['minimumAgeWithoutFee'].value;\n      this.car.photoPath = this.photoPreviewUrl as string;\n      this.car.automatic = this.carForm.controls['automatic'].value;\n      // this.car.carDealer = this.carForm.controls['carDealer'].value;\n      // this.car.carType = this.carForm.controls['carType'].value;\n      // this.car.fuelType = this.carForm.controls['fuelType'].value;\n\n\n      console.log(this.car)\n      console.log(\"save call\")\n      this.carHttpService.save(this.car).subscribe({\n        next: car => {\n          this.dialogRef.close(car);\n          console.log(\"Success\");\n        },\n        error: () => console.log(\"Error\")\n      });\n    // }\n  }\n  onPhotoSelected(event: Event): void {\n    const inputElement = event.target as HTMLInputElement;\n    if (inputElement.files && inputElement.files.length > 0) {\n      this.selectedPhoto = inputElement.files[0];\n\n      // Read the selected file and display the preview\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.photoPreviewUrl = reader.result as String;\n      };\n      reader.readAsDataURL(this.selectedPhoto);\n    }\n  }\n\n  toBaseList(enumerationName: any, enumeration: any) {\n    let baseOptions: BaseOption[] = [];\n\n    Object.keys(enumeration)\n      .filter((key) => !Number(key) && key !== \"0\")\n      .forEach(async (key) => {\n        let translatedValue = enumeration;\n\n        baseOptions.push(new BaseOption(key, translatedValue));\n      });\n    return baseOptions;\n  }\n}\n","<form [formGroup]=\"carForm\">\n    <div>\n      <label for=\"carName\">Car Name</label>\n      <input id=\"carName\" type=\"text\" formControlName=\"name\" />\n  \n      <!-- Add more input fields for other properties (price, numberOfPassengers, numberOfBags, etc.) -->\n  \n      <label for=\"carDealer\">Car Dealer</label>\n      <select id=\"carDealer\" formControlName=\"carDealer\">\n        <option *ngFor=\"let dealerName of carDealersNames\" [value]=\"dealerName\">{{ dealerName }}</option>\n      </select>\n  \n      <label for=\"carType\">Car Type</label>\n      <select>\n        <option *ngFor=\"let carType of carTypesBaseOptions\" [value]=\"carType.value\">{{ carType.text }}</option>\n    </select>\n  \n      <label for=\"fuelType\">Fuel Type</label>\n      <select id=\"fuelType\" formControlName=\"fuelType\">\n        <option [ngValue]=\"null\" disabled>Select Fuel Type</option>\n        <option *ngFor=\"let type of fuelTypes\" [value]=\"type\">{{ type }}</option>\n      </select>\n  \n      <div class=\"photo-container\">\n        <label for=\"photoInput\" class=\"photo-label\">Attach Photo</label>\n        <input\n          type=\"file\"\n          id=\"photoInput\"\n          (change)=\"onPhotoSelected($event)\"\n          accept=\"image/*\"\n        />\n        <span class=\"photo-filename\">{{ selectedPhoto?.name }}</span>\n      </div>\n    \n      <div *ngIf=\"photoPreviewUrl\">\n        <img [src]=\"photoPreviewUrl\" alt=\"Photo Preview\" class=\"photo-preview\" />\n      </div>\n    </div>\n  \n    <button (click)=\"onSaveCar()\">Save</button>\n  </form>\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}